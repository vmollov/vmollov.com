@import "_variables";
@import "_mixins";

nav{
	width: 100%;
	padding: 0;
	margin: 0 0 @spacing-xs 0;
	background: @nav-bg;
	border-radius: @radius-sm;
	box-shadow: @shadow-sm;
	position: relative;
	-webkit-tap-highlight-color: transparent;

	a{
		font: 500 0.9em @generalFonts;
		text-align: center;
		text-decoration: none;
		letter-spacing: 0.03em;
		text-transform: uppercase;
		transition: color @transition-fast, background-color @transition-fast;

		@media @mediumSmall{
			font-size: 0.75em;
		}
	}

	// Mobile menu title - only visible on small screens
	.menuTitle{
		display: block;
		position: relative;

		@media @mediumSmall{
			display: none;
		}

		> a{
			display: block;
			text-align: center;
			padding: 12px 0;
			color: @text-muted;

			&:before{
				content: '';
				position: absolute;
				top: 14px;
				right: 14px;
				border: 5px solid transparent;
				border-top: 5px solid @text-muted;
				transition: transform @transition-fast;
			}

			&:hover{
				color: @linkcolor;
			}
		}

		&.menuOpen > a:before{
			transform: rotate(180deg);
			top: 10px;
		}
	}

	// Menu items container
	.menuItems{
		position: absolute;
		top: 100%;
		left: 0;
		right: 0;
		background: @nav-bg;
		border-radius: 0 0 @radius-sm @radius-sm;
		box-shadow: @shadow-md;
		z-index: 1000;
		list-style: none;
		padding: 0;
		margin: 0;

		// Closed state - hidden with transition
		max-height: 0;
		opacity: 0;
		overflow: hidden;
		transform: translateY(-10px);
		transition: max-height @transition-normal, opacity @transition-normal, transform @transition-normal;

		&.menuOpen{
			max-height: 500px;
			opacity: 1;
			transform: translateY(0);
		}

		@media @mediumSmall{
			display: flex;
			justify-content: space-around;
			position: static;
			box-shadow: none;
			border-radius: @radius-sm;
			// Reset mobile styles for desktop
			max-height: none;
			opacity: 1;
			overflow: visible;
			transform: none;
			transition: none;
		}

		> li {
			list-style: none;
			padding: 0;
			margin: 0;
			position: relative;
			border-top: 1px solid rgba(255, 255, 255, 0.05);

			&:first-child{
				border-top: none;
			}

			@media @mediumSmall{
				border-top: none;
				flex: 1;
			}

			> a{
				outline: none;
				display: block;
				position: relative;
				padding: 12px 0;
				color: @text-muted;

				&:visited{
					color: @text-muted;
				}

				&:hover{
					color: @linkcolor;
					background: rgba(255, 255, 255, 0.03);
				}

				@media @mediumSmall{
					border-right: 1px solid rgba(255, 255, 255, 0.05);
				}
			}

			&:first-child > a{
				@media @mediumSmall{
					border-radius: @radius-sm 0 0 @radius-sm;
				}
			}

			&:last-child > a{
				border-radius: 0 0 @radius-sm @radius-sm;

				@media @mediumSmall{
					border-right: none;
					border-radius: 0 @radius-sm @radius-sm 0;
				}
			}

			// Submenu support
			&.hasSub{
				> a{
					display: none;

					@media @mediumSmall{
						display: block;
						&:before{
							content: '';
							position: absolute;
							top: 14px;
							right: 8px;
							border: 4px solid transparent;
							border-top: 4px solid @text-muted;
							transition: transform @transition-fast;
						}
					}
				}

				&.hover{
					> a{
						background: rgba(255, 255, 255, 0.05);
						color: @linkcolor;
						z-index: 999;

						&:before{
							transform: rotate(180deg);
							top: 16px;
						}
					}
					> ul{
						display: block;
					}
				}
			}

			// Nested submenus
			> ul{
				animation: fadeIn_slide 0.25s ease-out;
				display: block;
				width: 100%;
				top: 100%;
				border-radius: 0 0 @radius-sm @radius-sm;
				z-index: 999;
				background: @nav-bg;
				list-style: none;
				padding: 0;
				margin: 0;

				@media @mediumSmall{
					display: none;
					position: absolute;
					padding: @spacing-xs 0;
					box-shadow: @shadow-md;
				}

				li{
					display: block;
					list-style: none;
					padding: 0;
					margin: 0;
					position: relative;

					&:not(:first-child){
						border-top: 1px solid rgba(255, 255, 255, 0.05);
					}

					@media @mediumSmall{
						border-top: 1px solid rgba(255, 255, 255, 0.05);
					}

					a, a:visited{
						outline: none;
						display: block;
						position: relative;
						margin: 0;
						padding: 10px 20px;
						color: @text-muted;
					}

					a:hover {
						color: @linkcolor;
						background: rgba(255, 255, 255, 0.03);
					}
				}
			}
		}
	}
}
